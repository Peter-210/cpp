services:
  cpp:
    profiles: [parent]
    container_name: cpp-container
    build:
      context: .
    volumes:
      - .:/app
    entrypoint: /bin/bash
    stdin_open: true
    tty: true
  cpp-prod:
    profiles: [prod]
    extends: cpp
    build:
      dockerfile: docker/Dockerfile.prod
    image: cpp-image-prod
  cpp-dev:
    profiles: [dev]
    extends: cpp
    build:
      dockerfile: docker/Dockerfile.dev
    image: cpp-image-dev
    security_opt:
      - seccomp=unconfined
